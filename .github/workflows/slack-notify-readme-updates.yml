# Useful in a temporary manner until we fully release the public repo
name: Send slack message when readme contents are updated
on:
  workflow_dispatch:
  push: 
    branches: 
      - main
    paths: 
      - "codebundles/**/README.md"
      - ".github/workflows/slack-notify-readme-updates.yml"

jobs:
  notify-slack:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
        with: 
          fetch-depth: 0
      - name: Check for list of commits
        run: | 
          # Get list of changed files
          git diff --name-only ${{ github.event.before }} ${{ github.event.after }} | grep README.md
          CHANGED_FILES="$(git diff --name-only ${{ github.event.before }} ${{ github.event.after }} | grep README.md)"
          echo $CHANGED_FILES